name: docker
on: [push]
jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
        - name: Checkout
          uses: actions/checkout@v2
        - name: 'Docker swarm init'
          run: docker swarm init --default-addr-pool 10.20.0.0/16
        - name: 'Create proxy network'
          run: make docker-create-network
        - name: 'Build containers'
          run: make docker-deploy
        - name: 'Check running containers'
          run: make docker-ls